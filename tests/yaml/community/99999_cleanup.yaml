name: "CLEANUP_AND_LOGOUT"
description: "Clean up test user and logout"
executor: "rediacc-cli.py"

# This test demonstrates cleanup of a test user before logout
# Note: Full resource cleanup is complex due to database constraints:
# - Bridges create their own user accounts
# - Some resources may have been renamed during tests
# - Foreign key constraints must be respected

tests:
  # Note: User deactivation is skipped because user creation was disabled in 03000_users.yaml
  # due to parameter mapping issues. The test_user_email chain variable is not set.
  
  # Placeholder test to ensure cleanup runs
  - name: "verify_cleanup_context"
    command: ["GetUserCompany"]
    expect:
      success: true
    description: "Verify we're still authenticated before logout"

  # Logout from current session
  - name: "logout"
    command: ["logout"]
    expect:
      success: true
    description: "Logout and invalidate authentication token"
  
