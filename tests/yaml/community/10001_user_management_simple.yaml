name: USER_MANAGEMENT_SIMPLE_TEST
description: Simplified test for user management endpoints
executor: rediacc-cli.py
setup:
- name: create_test_company
  command:
  - CreateNewCompany
  args:
    companyName: UserMgmtTestCompany-${TIMESTAMP}
    email: usertest-${TIMESTAMP}@test.com
    password: Test@Pass123!
  expect:
    success: true
- name: activate_account
  command:
  - ActivateUserAccount
  args:
    email: usertest-${TIMESTAMP}@test.com
    activationCode: '111111'
    password: Test@Pass123!
  expect:
    success: true
- name: login_admin
  command:
  - CreateAuthenticationRequest
  args:
    email: usertest-${TIMESTAMP}@test.com
    password: Test@Pass123!
  expect:
    success: true
tests:
- name: verify_default_membership
  command:
  - GetTeamMembers
  args:
    teamName: Private Team
  expect:
    success: true
    output_contains: usertest-${TIMESTAMP}@test.com
  description: Verify user is automatically in Private Team
- name: create_custom_team
  command:
  - CreateTeam
  args:
    teamName: CustomTeam-${TIMESTAMP}
    teamVault: '{}'
  expect:
    success: true
  description: Create a new team
- name: verify_creator_membership
  command:
  - GetTeamMembers
  args:
    teamName: CustomTeam-${TIMESTAMP}
  expect:
    success: true
    output_contains: usertest-${TIMESTAMP}@test.com
  description: Verify creator is automatically team member
- name: verify_cleanup_context
  command:
  - GetUserCompany
  expect:
    success: true
  description: Verify we're still authenticated before logout
- name: logout
  command:
  - DeleteUserRequest
  expect:
    success: true
  description: Logout and invalidate authentication token
