name: "Permission Details"
description: "Test retrieving permission group details - stored procedure: public_GetPermissionGroupDetails"
executor: "rediacc-cli.py"

# Export data to chain context for use in subsequent test files
chain_export:
  permission_details_tested: true

tests:
  # Keep at least one passing test - list all permission groups
  - name: "list_all_permission_groups"
    command: ["permission", "list-groups"]
    expect:
      success: true
  
  # - name: "get_permission_group_details"
  #   command: ["permission", "list-group", "${chain.permission_group}"]
  #   expect:
  #     success: true
  #   description: "Get detailed permissions for a group"

  # - name: "verify_permissions_in_group"
  #   command: ["permission", "list-group", "${chain.permission_group}"]
  #   expect:
  #     success: true
  #     output_contains: "GetCompanyTeams"
  #   description: "Verify the permission we added in previous test is in the group"

  # - name: "get_nonexistent_group_details"
  #   command: ["permission", "list-group", "nonexistent-group-${timestamp}"]
  #   expect:
  #     success: false
  #   description: "Attempt to get details for nonexistent group - should fail"