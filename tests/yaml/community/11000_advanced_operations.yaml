name: ADVANCED_OPERATIONS_TEST
description: Test advanced operations - exports and vaults
executor: rediacc-cli.py
setup:
- name: create_test_company
  command:
  - CreateNewCompany
  args:
    companyName: AdvOpsCompany-${TIMESTAMP}
    email: advops-${TIMESTAMP}@test.com
    password: Test@Pass123!
    subscriptionPlan: PREMIUM
  expect:
    success: true
- name: activate_account
  command:
  - ActivateUserAccount
  args:
    email: advops-${TIMESTAMP}@test.com
    activationCode: '111111'
    password: Test@Pass123!
  expect:
    success: true
- name: login
  command:
  - CreateAuthenticationRequest
  args:
    email: advops-${TIMESTAMP}@test.com
    password: Test@Pass123!
  expect:
    success: true
tests:
- name: export_company_data
  command:
  - ExportCompanyData
  expect:
    success: true
  description: Export company data
- name: get_company_vaults
  command:
  - GetCompanyVaults
  expect:
    success: true
  description: Get company vaults
- name: get_permission_groups
  command:
  - GetCompanyPermissionGroups
  expect:
    success: true
    output_contains: Administrators
  description: Get company permission groups
- name: get_user_company
  command:
  - GetUserCompany
  expect:
    success: true
    output_contains: AdvOpsCompany-${TIMESTAMP}
  description: Get user's company information
- name: verify_cleanup_context
  command:
  - GetUserCompany
  expect:
    success: true
  description: Verify we're still authenticated before logout
- name: logout
  command:
  - DeleteUserRequest
  expect:
    success: true
  description: Logout and invalidate authentication token
