name: QUEUE_OPERATIONS_SIMPLE_TEST
description: Simplified test for queue operations
executor: rediacc-cli.py
setup:
- name: create_test_company
  command:
  - CreateNewCompany
  args:
    companyName: QueueTestCompany-${TIMESTAMP}
    email: queuetest-${TIMESTAMP}@test.com
    password: Test@Pass123!
  expect:
    success: true
- name: activate_account
  command:
  - ActivateUserAccount
  args:
    email: queuetest-${TIMESTAMP}@test.com
    activationCode: '111111'
    password: Test@Pass123!
  expect:
    success: true
- name: login_admin
  command:
  - CreateAuthenticationRequest
  args:
    email: queuetest-${TIMESTAMP}@test.com
    password: Test@Pass123!
  expect:
    success: true
- name: create_test_team
  command:
  - CreateTeam
  args:
    teamName: QueueTestTeam-${TIMESTAMP}
    teamVault: '{}'
  expect:
    success: true
- name: create_test_region
  command:
  - CreateRegion
  args:
    regionName: QueueTestRegion-${TIMESTAMP}
    regionVault: '{}'
  expect:
    success: true
- name: create_test_bridge
  command:
  - CreateBridge
  args:
    regionName: QueueTestRegion-${TIMESTAMP}
    bridgeName: QueueTestBridge-${TIMESTAMP}
    bridgeVault: '{}'
  expect:
    success: true
- name: create_test_machine
  command:
  - CreateMachine
  args:
    teamName: QueueTestTeam-${TIMESTAMP}
    bridgeName: QueueTestBridge-${TIMESTAMP}
    machineName: QueueTestMachine-${TIMESTAMP}
    machineVault: '{"ip": "10.0.0.1"}'
  expect:
    success: true
tests:
- name: list_queue_items_initial
  command:
  - GetTeamQueueItems
  args:
    teamName: QueueTestTeam-${TIMESTAMP}
  expect:
    success: true
  description: List queue items for test team
- name: create_test_queue_item
  command:
  - CreateQueueItem
  args:
    teamName: QueueTestTeam-${TIMESTAMP}
    machineName: QueueTestMachine-${TIMESTAMP}
    bridgeName: QueueTestBridge-${TIMESTAMP}
    queueVault: '{"function": "echo", "message": "Test queue item"}'
    priority: 3
  expect:
    success: true
  description: Create a test queue item
- name: list_queue_items_after_create
  command:
  - GetTeamQueueItems
  args:
    teamName: QueueTestTeam-${TIMESTAMP}
  expect:
    success: true
    output_contains: totalCount
- name: verify_cleanup_context
  command:
  - GetUserCompany
  expect:
    success: true
  description: Verify we're still authenticated before logout
- name: logout
  command:
  - DeleteUserRequest
  expect:
    success: true
  description: Logout and invalidate authentication token
