name: AUDIT_SIMPLE_TEST
description: Simplified test for audit and monitoring endpoints
executor: rediacc-cli.py
setup:
- name: create_test_company
  command:
  - CreateNewCompany
  args:
    companyName: AuditSimpleCompany-${TIMESTAMP}
    email: auditsimple-admin-${TIMESTAMP}@test.com
    password: ${config.test_data.company.admin_password}
  expect:
    success: true
- name: activate_user_account
  command:
  - ActivateUserAccount
  args:
    email: auditsimple-admin-${TIMESTAMP}@test.com
    activationCode: ${config.test_environment.activation_code}
    password: ${config.test_data.company.admin_password}
  expect:
    success: true
- name: login_as_admin
  command:
  - CreateAuthenticationRequest
  args:
    email: auditsimple-admin-${TIMESTAMP}@test.com
    password: ${config.test_data.company.admin_password}
  expect:
    success: true
tests:
- name: get_audit_logs
  command:
  - GetAuditLogs
  args:
    entityFilter: Company
    maxRecords: 5
  expect:
    success: true
- name: get_lookup_data
  command:
  - GetLookupData
  expect:
    success: true
- name: create_history_team
  command:
  - CreateTeam
  args:
    teamName: HistoryTeam-${TIMESTAMP}
    teamVault: '{}'
  expect:
    success: true
- name: rename_history_team
  command:
  - UpdateTeamName
  args:
    currentTeamName: HistoryTeam-${TIMESTAMP}
    newTeamName: RenamedTeam-${TIMESTAMP}
  expect:
    success: true
- name: get_recent_logs
  command:
  - GetAuditLogs
  args:
    entityFilter: Team
    maxRecords: 10
  expect:
    success: true
    output_contains: RenamedTeam-${TIMESTAMP}
- name: delete_history_team
  command:
  - DeleteTeam
  args:
    teamName: RenamedTeam-${TIMESTAMP}
  expect:
    success: true
- name: verify_cleanup_context
  command:
  - GetUserCompany
  expect:
    success: true
  description: Verify we're still authenticated before logout
- name: logout
  command:
  - DeleteUserRequest
  expect:
    success: true
  description: Logout and invalidate authentication token
