name: COMPANY_SETUP_TEST
description: Test company creation and initial configuration
executor: rediacc-cli.py
tests:
- name: create_new_company
  command:
  - CreateNewCompany
  args:
    companyName: ${config.test_data.company.name_pattern}
    email: ${config.test_data.company.admin_email_pattern}
    password: ${config.test_data.company.admin_password}
  expect:
    success: true
- name: activate_user_account
  command:
  - ActivateUserAccount
  args:
    email: ${config.test_data.company.admin_email_pattern}
    activationCode: ${config.test_environment.activation_code}
    password: ${config.test_data.company.admin_password}
  expect:
    success: true
- name: login_as_company_admin
  command:
  - CreateAuthenticationRequest
  args:
    email: ${config.test_data.company.admin_email_pattern}
    password: ${config.test_data.company.admin_password}
  expect:
    success: true
- name: get_company_vaults
  command:
  - GetCompanyVaults
  expect:
    success: true
- name: verify_cleanup_context
  command:
  - GetUserCompany
  expect:
    success: true
  description: Verify we're still authenticated before logout
- name: logout
  command:
  - DeleteUserRequest
  expect:
    success: true
  description: Logout and invalidate authentication token
