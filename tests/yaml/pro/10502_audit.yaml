name: AUDIT_PRO_TEST
description: Test advanced audit operations including entity trace and history
executor: "commands/cli_main.py"
setup:
- name: create_test_company
  command:
  - CreateNewCompany
  args:
    companyName: AuditAdvCompany-${TIMESTAMP}
    email: auditadv-admin-${TIMESTAMP}@test.com
    password: ${config.test_data.company.admin_password}
  expect:
    success: true
- name: activate_user_account
  command:
  - ActivateUserAccount
  args:
    email: auditadv-admin-${TIMESTAMP}@test.com
    activationCode: ${config.test_environment.activation_code}
    password: ${config.test_data.company.admin_password}
  expect:
    success: true
- name: login_as_admin
  command:
  - CreateAuthenticationRequest
  args:
    email: auditadv-admin-${TIMESTAMP}@test.com
    password: ${config.test_data.company.admin_password}
  expect:
    success: true
tests:
- name: get_team_audit_trace
  command:
  - GetEntityAuditTrace
  args:
    entityType: Team
    entityId: 1
  expect:
    success: false
  description: Get audit trace for a team entity
- name: get_machine_audit_trace
  command:
  - GetEntityAuditTrace
  args:
    entityType: Machine
    entityId: 1
  expect:
    success: false
  description: Get audit trace for a machine entity
- name: get_user_entity_history
  command:
  - GetEntityHistory
  args:
    entityType: User
    entityId: 1
  expect:
    success: false
  description: Get history for a user entity
- name: get_bridge_entity_history
  command:
  - GetEntityHistory
  args:
    entityType: Bridge
    entityId: 1
  expect:
    success: false
  description: Get history for a bridge entity
- name: get_entity_history_filtered
  command:
  - GetEntityHistory
  args:
    entityType: Company
    entityId: 1
    startDate: '2024-01-01'
    endDate: '2024-12-31'
  expect:
    success: false
  description: Get filtered entity history
- name: verify_cleanup_context
  command:
  - GetUserCompany
  expect:
    success: true
  description: Verify we're still authenticated before logout
- name: logout
  command:
  - DeleteUserRequest
  expect:
    success: true
  description: Logout and invalidate authentication token
